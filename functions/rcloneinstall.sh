#!/bin/bash
#
# Title:      PGBlitz (Reference Title File)
# Author(s):  Admin9705
# URL:        https://pgblitz.com - http://github.pgblitz.com
# GNU:        General Public License v3.0
################################################################################
rcloneinstall () {

# install what version of rclone
rversion=1.46

if [[ ! -e "/root/.config/rclone/rclone.conf" ]]; then
touch /root/.config/rclone/rclone.conf; fi

rcheck1=$(rclone --version 2>&1)
rcheck2=$(echo $rcheck1 | cut -c1-12)

if [[ "rclone v$rversion" != "$rcheck2" ]]; then

tee <<-EOF

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💪 Installing RClone Version ~ $rversion
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

EOF
sleep 1.5

tee "/etc/fuse.conf" > /dev/null <<EOF
# /etc/fuse.conf - Configuration file for Filesystem in Userspace (FUSE)
# Set the maximum number of FUSE mounts allowed to non-root users.
# The default is 1000.
#mount_max = 1000
# Allow non-root users to specify the allow_other or allow_root mount options.
user_allow_other
EOF

ansible-playbook /opt/pgclone/rclone.yml; fi

}
